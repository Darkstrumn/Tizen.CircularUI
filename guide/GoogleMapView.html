<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>GoogleMapView </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="GoogleMapView ">
    <meta name="generator" content="docfx 1.0.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Tizen.Wearable.CircularUI.doc.GoogleMapView">
<h1 id="googlemapview">GoogleMapView</h1>

<h2 id="how-to-display-map-in-tizen-net-application">How to display Map in Tizen .NET application</h2>
<p>You can use the following ways for displaying map in your .NET applications.</p>
<ol>
<li>Tizen.Maps<ul>
<li>Tizen.Maps provides geocoding. reverse geocording, place searching, route calculation, and map view widgets. This provides the most functionality for map in Tizen .NET application.</li>
<li>Tizen.Maps provides <a href="https://developer.here.com/">Here Maps</a>. In some country, it has low map quality or outdated(e.g. China, Korea, Japan), You can check at <a href="https://mobile.here.com/?x=ep">mobile.here.com</a>. So you need to make sure that the country where your app is deployed is provided with Here Map data.</li>
<li>For using this API, you should use Tizen .NET UI framework which are EFLShrap or Elmsharp or NUI. If you want to use this APIs in Xamarin.Forms Application. you should make custom renderer.</li>
</ul>
</li>
<li>Xamarin.Forms.Maps<ul>
<li>You can use Xamarin.Forms.Maps in Xamarin.Forms application. Xamarin.Forms.Maps.Tizen renderer use Tizen.Maps. So It provides Here Maps data. But, it provides minimun set of map functionality.</li>
</ul>
</li>
<li>Use WebView and REST APIs<ul>
<li>Map providers support Javascirpt API and REST APIs for Web and application.</li>
<li>You can retrive map data using <code>System.Net.Http</code>. You can implement javascript code for loading map and then set in Xamarin.Forms.WebView.</li>
</ul>
</li>
<li>Tizen.Wearable.CircularUI GoogleMapView<ul>
<li><code>GoogleMapView</code> provides minimum functionality of <a href="https://developers.google.com/maps/documentation/javascript/tutorial">Google Maps javascript APIs</a>.</li>
</ul>
</li>
</ol>
<h2 id="introduce">Introduce</h2>
<p><code>GoogleMapView</code> provides minimum functionality of <a href="https://developers.google.com/maps/documentation/javascript/tutorial">Google Maps javascript APIs</a>. It display google map data in <code>WebView</code> which is predefined in renderer. GoogleMapView only provides static map data. It doesn&#39;t mean that map can&#39;t scroll and zoom. GoogleMapView property value can&#39;t reflect user interaction. For example, it is impossible to get the position(geographical coordinates) value where user clicks in GoogleMapView. And, it is impossbile to display the user&#39;s current position dynamically. Therefore, you can use it to display a map of a specific area or marking designated positions in the map.</p>
<h2 id="prerequisite">Prerequisite</h2>
<h3 id="1-get-google-api-key">1. Get Google API Key</h3>
<p>To use the <code>GoogleMapView</code>, you must get an <code>google API key</code> in <a href="https://console.cloud.google.com/google/maps-apis">Google Cloud Patform Console</a>. The API key is used to track API requests associated with your project for usage and billing. For more detail Information, please refer to <a href="https://developers.google.com/maps/documentation/javascript/get-api-key">Get API Key</a></p>
<h3 id="2-insert-api-key-in--formscircularuiinit">2. Insert API key in  FormsCircularUI.Init</h3>
<p>set your <code>API key</code> for the parameter of <code>FormsCircularUI.Init(APIKEY)</code> method. Your API key will be used for loading google javascript map in GoogleMapView.</p>
<pre><code class="lang-c#">    private static string APIKEY = &quot;Insert_Your_Google_API_key&quot;;

...

    global::Xamarin.Forms.Platform.Tizen.Forms.Init(app);
    FormsCircularUI.Init(APIKEY);
</code></pre><h3 id="3-add-previleges">3. Add Previleges</h3>
<p>Before using <code>GoogleMapView</code> for your application, you must add the <code>http://tizen.org/privilege/internet</code> and <code>http://tizen.org/privilege/network.get</code> previlege to <code>tizen-manifest.xml</code> file. Because <code>GoogleMapView</code> needs internet connection. Following figure show adding privilege to <code>tizen-manifest.xml</code>. If you want to get the current location, you should use location service which needs <code>http://tizen.org/privilege/location</code>
privilege.
<img src="data/googlemapview_privilege.png" alt="GoogleMapView privilege"></p>
<h2 id="display-map">Display map</h2>
<p><code>GoogleMapView</code> displays google javascript map. <code>GoogleMapView</code> setting value can be changed with <code>GoogleMapOption</code> structure which set by the <code>Update</code> method.
By default, <code>GoogleMapOption</code> structure is null. and GoogleMapView renderer set default value.
Following example show default GoogleMapView without GoogleMapOption and screen capture of this example(figure1).</p>
<p><em>The code example of this guide uses TCMapViewStackLayout1 code of WearableUIGallery.
The code is available in test\WearableUIGallery\WearableUIGallery\TC\TCMapViewStackLayout1.xaml</em></p>
<pre><code class="lang-xml">&lt;ContentPage
    x:Class=&quot;WearableUIGallery.TC.TCMapViewStackLayout1&quot;
    xmlns=&quot;http://xamarin.com/schemas/2014/forms&quot;
    xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;
    xmlns:w=&quot;clr-namespace:Tizen.Wearable.CircularUI.Forms;assembly=Tizen.Wearable.CircularUI.Forms&quot;&gt;
    &lt;ContentPage.Content&gt;
        &lt;StackLayout Orientation=&quot;Vertical&quot; VerticalOptions=&quot;FillAndExpand&quot;&gt;
            &lt;w:GoogleMapView x:Name=&quot;GoogleMapView&quot; VerticalOptions=&quot;FillAndExpand&quot; HorizontalOptions=&quot;FillAndExpand&quot; /&gt;
        &lt;/StackLayout&gt;
    &lt;/ContentPage.Content&gt;
&lt;/ContentPage&gt;
</code></pre><p>Following example show the GoogleMapView with GoogleMapOption and screen capture of this example(figure2).
Xaml code is same as the above example. Following example only show xaml.cs code. GoogleMapView center latitude and longitude value are set <code>34.0869</code> and <code>-118.282242</code>.
And then, <code>Zoom</code> value is set 10.1 and <code>Maptype</code> is set <code>Hybrid</code>.</p>
<p><em>The code example of this guide uses TCMapViewStackLayout3 code of WearableUIGallery.
The code is available in test\WearableUIGallery\WearableUIGallery\TC\TCMapViewStackLayout3.xaml.cs</em></p>
<pre><code class="lang-c#">private static double Latitude = 34.0869;
private static double Longitude = -118.282242;

public TCMapViewStackLayout3()
{
    InitializeComponent ();
    var position = new LatLng(Latitude, Longitude);
    var option = new GoogleMapOption(position);
    option.Zoom = 10.1;
    option.MapType = GoogleMapType.Hybrid;
    GoogleMapView.Update(option);
}
</code></pre><table>
<thead>
<tr>
<th style="text-align:center"><img src="data/googlemapview_default.png" alt="Default GoogleMapView"></th>
<th style="text-align:center"><img src="data/googlemapview_googlemapoption.png" alt="GoogleMapOption GoogleMapView"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Default GoogleMapView(figure1)</td>
<td style="text-align:center">GoogleMapView with GoogleMapOption(figure2)</td>
</tr>
</tbody>
</table>
<h2 id="display-pins-in-map">Display pins in Map</h2>
<p>Specific locations can be marked on the map with <code>Xamarin.Forms.Maps.Pin</code> objects.
Following example show the GoogleMapView with <code>Pin</code> objects. The figure is the result of this example code.</p>
<pre><code class="lang-c#">    public partial class TCMapViewPins1 : ContentPage
    {
        private static double Latitude = 40.7157961;
        private static double Longitude = -74.0252194;
        public TCMapViewPins1()
        {
            InitializeComponent ();

            var option = new GoogleMapOption();
            var position = new LatLng(Latitude, Longitude);
            option.Center = position;
            option.Zoom = 12;
            mapview.Update(option);

            var marker1 = new Marker
            {
                Position = new LatLng(40.711493, -74.011351),
                Description = &quot;Westfield World Trade Center&quot;,
                Address = &quot;185 Greenwich St, New York, NY 10007&quot;,
            };

            var marker2 = new Marker
            {
                Position = new LatLng(40.689651, -74.045412),
                Description = &quot;Statue of Liberty National Monument&quot;,
                Address = &quot;New York, NY 10004&quot;,
            };

            var marker3 = new Marker
            {
                Position = new LatLng(40.748368, -73.985560),
                Description = &quot;Empire State Building&quot;,
                Address = &quot;20 W 34th St, New York, NY 10001&quot;,
            };

            mapview.Markers.Add(marker1);
            mapview.Markers.Add(marker2);
            mapview.Markers.Add(marker3);
        }
</code></pre><p><img src="data/googlemapview_add_pins.png" alt="Markers GoogleMapView"></p>
<h2 id="display-device-current-position-statical">Display device current position (statical)</h2>
<p>If you want to display marker for your device&#39;s current position or display map on your current position, you can use <a href="https://developer.tizen.org/development/guides/.net-application/location-and-sensors/location-information">Tizen.Location</a> API. To use the <code>Tizen.Location</code>, you must add <code>http://tizen.org/privilege/location</code> privilege to <code>tizen-manifest.xml</code> (refer to above <a href="https://samsung.github.io/Tizen.CircularUI/guide/GoogleMapView.html#Prerequisite">guide</a>) and you should add code for checking and requesting of privacy-related permission. Following code example show you how can check and request privacy-related permission. For more detail informaiton about privacy-related permission, please refer to <a href="https://developer.tizen.org/development/guides/.net-application/security/privacy-related-permissions">Privacy-related Permissions guide</a>.</p>
<p><em>The code example of this guide uses TCMapViewCurrentPosition code of WearableUIGallery.
The code is available in test\WearableUIGallery\WearableUIGallery\TC\TCMapViewCurrentPosition.xaml.cs</em></p>
<pre><code class="lang-c#">        public void PrivilegeCheck()
        {
            try
            {
                CheckResult result = PrivacyPrivilegeManager.CheckPermission(&quot;http://tizen.org/privilege/location&quot;);
                switch (result)
                {
                    case CheckResult.Allow:
                        break;
                    case CheckResult.Deny:
                        break;
                    case CheckResult.Ask:
                        /// Request to privacy popup
                        PrivacyPrivilegeManager.RequestPermission(&quot;http://tizen.org/privilege/location&quot;);
                        break;
                }
            }
            catch (Exception ex)
            {
                /// Exception handling
            }
        }
</code></pre><p>If a user has granted permission to use the <code>http://tizen.org/privilege/location</code>, device can use <code>Tizen.Location</code> service.
Following example code show the GoogleMapView which move to current position and display marker your device position. And the following figure is the result of this example code.</p>
<pre><code class="lang-c#">        void LocationInitialize()
        {
            try
            {
                _locator = new Locator(LocationType.Hybrid);
                if (_locator != null)
                {
                    _locator.Start();
                    _locator.ServiceStateChanged += LocatorServiceStateChanged;
                }

                _locatorInitialized = true;
            }
            catch (Exception ex)
            {
                /// Exception handling
            }
        }

        public void LocatorServiceStateChanged(object sender, ServiceStateChangedEventArgs e)
        {
            if (e.ServiceState == ServiceState.Enabled)
            {
                GetCurrentPosition();
            }

...

        }

        private void GetCurrentPosition()
        {
            var marker = new Marker();
            try
            {
                Location location = _locator.GetLocation();
                var current = new LatLng(location.Latitude, location.Longitude);
                Tizen.Log.Debug(&quot;CircularUI&quot;, $&quot;Current:[{location.Latitude},{location.Longitude} ]&quot;);
                marker.Position = current;
            }
            catch (Exception ex)
            {

...

            }

            marker.Description = &quot;Current position&quot;;
            _option.Center = marker.Position;
            _option.Zoom = 14;
            mapviewPosition.Update(_option);

            mapviewPosition.Markers.Add(marker);
        }
</code></pre><p><img src="data/googlemapview_current_position.gif" alt="current position GoogleMapView"></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Copyright &copy; 2018-2019 Samsung <br> Generated by <strong>DocFX</strong></span>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
