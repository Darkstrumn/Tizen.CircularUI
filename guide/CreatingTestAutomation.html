<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Creating UI automation test for Tizen .NET Application </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Creating UI automation test for Tizen .NET Application ">
    <meta name="generator" content="docfx 1.0.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Tizen.Wearable.CircularUI.doc.CreatingTestAutomation">
<h1 id="creating-ui-automation-test-for-tizen-net-application">Creating UI automation test for Tizen .NET Application</h1>

<p>This guide shows how to create and run a UI automation test using Appium and NUnit for Tizen .NET Application.<br><a href="https://github.com/appium/appium">Appium</a> is an open source project supporting cross-platform test automation tool. You can find many guide and information.<br>In This guide, Test Application uses <a href="https://github.com/Samsung/Tizen.CircularUI/tree/master/test/WearableUIGallery">WearableUIGallery</a> which contains many TCs to check CircularUI API behavior.<br>Appium Client has a test script for UI automation. This guide uses the <a href="https://github.com/Samsung/Tizen.CircularUI/tree/master/test/Appium.CircularUI.Tests">Appium.CircularUI.Test</a>.<br>Please refer to the following image</p>
<p><img src="data/appium_structure.png" alt="Appium_structure"></p>
<p>There are 4 step for building UI automation</p>
<ul>
<li><p><a href="#prerequisite">Prerequisite</a></p>
</li>
<li><p><a href="#modifying-your-application">Modifying Your Application</a></p>
</li>
<li><p><a href="#make-testscript">Make Testscript</a></p>
</li>
<li><p><a href="#run-testscript">Run Testscript</a></p>
</li>
</ul>
<h2 id="prerequisite">Prerequisite</h2>
<ul>
<li><p>Installing Appium server</p>
<ul>
<li><p>appium guide  : <a href="https://github.com/appium/appium/blob/master/docs/en/contributing-to-appium/appium-from-source.md">https://github.com/appium/appium/blob/master/docs/en/contributing-to-appium/appium-from-source.md</a></p>
</li>
<li><p>appium git repository : <a href="https://github.com/appium/appium">https://github.com/appium/appium</a></p>
</li>
<li><p>setup and run appium server (e.g ubunt)</p>
<pre><code class="lang-markdown">$ git clone https://github.com/appium/appium.git
$ cd appium
$ npm install appium-chromedriver --chromedriver_cdnurl=http://npm.taobao.org/mirrors/chromedriver
$ npm install
$ npm run build
$ node .
</code></pre></li>
</ul>
</li>
</ul>
<h2 id="modifying-your-application">Modifying Your Application</h2>
<ol>
<li><p>If your Application use CircularUI then download Tizen.Appium git. Otherwise, skips 2 ~ 3 steps and go to step 4 after adding Tizen.Appium NuGet in Your Application project.</p>
</li>
<li><p>In the <code>Tizen.Appium.csproj</code> file, add <code>WATCH</code> to the <code>DefineConstants</code> value for being restored CircularUI NuGet.</p>
<pre><code class="lang-xml">&lt;PropertyGroup Condition=&quot;&#39;$(Configuration)|$(Platform)&#39;==&#39;Debug|AnyCPU&#39;&quot;&gt;
    &lt;DefineConstants&gt;TRACE;DEBUG;TIZEN4_0;WATCH&lt;/DefineConstants&gt;
&lt;/PropertyGroup&gt;

    &lt;ItemGroup Condition=&quot;$(DefineConstants.Contains(WATCH))&quot;&gt;
    &lt;PackageReference Include=&quot;Tizen.Wearable.CircularUI&quot; Version=&quot;1.0.0-pre2-00118&quot; /&gt;
&lt;/ItemGroup&gt;
</code></pre></li>
<li><p>Add <code>Tizen.Appium</code> project to your application solution, and then add Tizen.Appium in a reference project in your application project.</p>
<p> In the following Image, <code>Tizen.Appium</code> is added in <code>Tizen.Wearable.CircularUI.Test.Appium</code> solution, and then add in a reference project in <code>WearableUIGallery.Tizen.Wearable</code> project.</p>
<p> <img src="data/add_tizen_appium_project.png" alt="Add_TizenAppium"></p>
</li>
<li><p>Add <code>Tizen.Appium.TizenAppium.StartService</code> to main method and <code>Tizen.Appium.TizenAppium.StopService</code>  to <code>OnTerminate</code> methods.</p>
<pre><code class="lang-cs">        protected override void OnTerminate()
        {
            base.OnTerminate();
#if UITest
            global::Tizen.Appium.TizenAppium.StopService();
#endif
        }

        static void Main(string[] args)
        {
            var app = new Program();
            global::Xamarin.Forms.Platform.Tizen.Forms.Init(app);
            FormsCircularUI.Init();
#if UITest
            global::Tizen.Appium.TizenAppium.StartService(app);
#endif
            app.Run(args);
        }
</code></pre></li>
<li><p>Add <code>AutomationId</code> to the <code>Xamarin.Forms</code> control for allowing to find and control the specified control during the automation test. Please refer to the following code.</p>
<pre><code class="lang-xml">    &lt;w:CirclePage.Content&gt;
        &lt;w:CircleScrollView x:Name=&quot;myscroller&quot; Orientation=&quot;Vertical&quot;&gt;
            &lt;StackLayout Orientation=&quot;Vertical&quot;&gt;
                &lt;Label HorizontalOptions=&quot;CenterAndExpand&quot; Text=&quot;Default&quot; /&gt;
                &lt;w:Check
                    AutomationId=&quot;default&quot;
                    DisplayStyle=&quot;Default&quot;
                    HorizontalOptions=&quot;CenterAndExpand&quot;
                    IsToggled=&quot;False&quot;
                    Toggled=&quot;OnToggledDefault&quot; /&gt;

                &lt;Label HorizontalOptions=&quot;CenterAndExpand&quot; Text=&quot;Onoff&quot; /&gt;
                &lt;w:Check
                    AutomationId=&quot;onOff&quot;
                    DisplayStyle=&quot;Onoff&quot;
                    HorizontalOptions=&quot;CenterAndExpand&quot;
                    IsToggled=&quot;True&quot;
                    Toggled=&quot;OnToggledOnOff&quot; /&gt;
</code></pre></li>
</ol>
<h3 id="make-testscript">Make Testscript</h3>
<ol>
<li><p>Install Nunit Test Adapter in visual studio :  Visual Studio Tools &gt; Extension and Update &gt; </p>
<p> <img src="data/install_nunit_test_adapter.png" alt="Install_NunitTest"></p>
</li>
<li><p>Create unit test project(.NET framework)</p>
<p> Visual Studio  File &gt; New &gt; Project &gt;  Tap Test in Visual C# &gt; Select Unit Test Project(.NET Framework)</p>
<p> <img src="data/create_nunit_test_project.png" alt="Create_NunitTest_Project"></p>
</li>
<li><p>Remove NuGet packages (e.g NunitTestAdapter, Xamarin.UITest ...) except Nunit, and then update Nunit NuGet package to v3.11.0.</p>
</li>
<li><p>Install following NuGet packages</p>
<ul>
<li>Appium.WebDriver (upper 4.0.0.4)</li>
<li>Selenium.WebDriver</li>
<li>Selenium.Support</li>
<li>Newtonsoft.Json</li>
<li>DotNetSeleniumExtras.PageObjects</li>
<li><p>Castle.Core</p>
<p><img src="data/install_nunit_nuget.png" alt="Install_NuGet"></p>
</li>
</ul>
</li>
<li><p>Remove auto-generated cs files(e.g AppInitializer.cs, Tests.cs), And then copy 3 files (<code>Program.cs, TestTemplate.cs, UITestDriver.cs</code>) from <code>Tizen.Wearable.CircularUI\test\Appium.CircularUI.Tests\</code> to your project.</p>
</li>
<li><p>Set configuration. Please refer to <code>InitTizen()</code> in <code>test\Appium.CircularUI.Tests\UITestDriver.cs</code>.</p>
<p> You should set AppiumOptions</p>
<ul>
<li>Set <code>platformName</code> to <code>Tizen</code></li>
<li>Set <code>deviceName</code> to your testing device name.</li>
<li>Set <code>appPackage</code> to your Application package name.</li>
<li>Set <code>app</code> to your Application tpk name.</li>
<li><p>Create <code>TizenDriver</code> with Uri(Your Appium server IP address). In the below Example <code>192.168.0.49</code> is Appium server IP. You should insert your device&#39;s IP which installed Appium server. 4723 is designated port number for Appium server.</p>
<pre><code class="lang-cs">      void InitTizen(string platform, string profile)
      {
          AppiumOptions option = new AppiumOptions();

          option.AddAdditionalCapability(&quot;platformName&quot;, platform);
          option.AddAdditionalCapability(&quot;deviceName&quot;, &quot;emulator-26111&quot;);
          option.AddAdditionalCapability(&quot;appPackage&quot;, &quot;org.tizen.example.WearableUIGallery.Tizen.Wearable&quot;);
          option.AddAdditionalCapability(&quot;app&quot;, &quot;org.tizen.example.WearableUIGallery.Tizen.Wearable-1.0.0.tpk&quot;);
          _driver = new TizenDriver&lt;AppiumWebElement&gt;(new Uri(&quot;http://192.168.0.49:4723/wd/hub&quot;), option);
          _touchScreen = new RemoteTouchScreen(_driver);
      }
</code></pre></li>
</ul>
</li>
<li><p>If you want to add a common set of functions that are performed before or after each test, please make <a href="https://github.com/nunit/docs/wiki/SetUp-Attribute">SetUp</a> method and <a href="https://github.com/nunit/docs/wiki/TearDown-Attribute">TearDown</a> method.</p>
<p> In the following Appium.CircularUI.Tests code, SetUp and TearDown methods are called in TestTemplate Class. Each Test Class inherited the TestTemplate Class.</p>
<pre><code class="lang-cs">using NUnit.Framework;

namespace Appium.UITests
{
    public class TestTemplate
    {
        public UITestDriver Driver;

        [OneTimeSetUp]
        public void Init()
        {
            Driver = UITestDriver.Instance;
        }

        [SetUp]
        public void TestSetUp()
        {
            Driver.FindTC(this.GetType().Name);
        }

        [TearDown]
        public void TestCleanUp()
        {
            Driver.GoHomePage();
        }
    }
}
</code></pre></li>
<li><p>Write test script with Nunit feature. please refer to <a href="https://github.com/nunit/docs/wiki/NUnit-Documentation">Nunit documentation</a></p>
<pre><code class="lang-cs">using NUnit.Framework;

namespace Appium.UITests
{
    [TestFixture, Order(15)]
    public class Check : TestTemplate
    {

        [Test]
        public void CheckTest()
        {
            Driver.Click(&quot;default&quot;);
            Driver.Click(&quot;onOff&quot;);
            Driver.Click(&quot;small&quot;);

            var isToggled = Driver.GetAttribute&lt;bool&gt;(&quot;default&quot;, &quot;IsToggled&quot;);
            Assert.True(isToggled, &quot;Check(default).IsToggled should be true, but got &quot; + isToggled);

            ...
        }
    }
</code></pre></li>
</ol>
<h3 id="run-testscript">Run Testscript</h3>
<ol>
<li><p>Launch your Tizen emulator or connect Tizen wearable device to PC which installed Appium server.</p>
</li>
<li><p>Run Appium Server.</p>
<pre><code class="lang-markdown">Appium installed Path/appium (master)$ node .
[Appium] Welcome to Appium v1.9.2-beta.2 (REV a95edb162350a359d6cc45b7aa89a3843b19f0ee)
[Appium] Appium REST http interface listener started on 0.0.0.0:4723
</code></pre></li>
<li><p>Launch <code>Test Explorer</code> Window In Visual Studio 2017.  Top menu bar &gt; Test &gt; Windows &gt; Test Explorer</p>
<p> <img src="data/test_explorer_window.png" alt="Test_Explorer"></p>
</li>
<li><p>Click <code>Run All</code> in Test Explorer window.</p>
<p> You can run the selected test clicking the <code>Run Selected Test</code> menu with a mouse right click on a test case.</p>
</li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Copyright &copy; 2018-2019 Samsung <br> Generated by <strong>DocFX</strong></span>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
